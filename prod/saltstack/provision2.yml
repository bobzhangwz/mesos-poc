---
#  gcr.io/google_containers/etcd:2.0.12

- name: install salt stack for salt master
  hosts:
    - saltmaster
  sudo: yes
  vars:
    salt_file_roots: "/srv/salt"
    salt_pillar_roots: "/srv/pillar"
    tmp_dir: /opt/k8s_install
  roles:
    - salt-master
  tasks:
    - name: make sure a directory for store installer file
      file:
        dest: "{{tmp_dir}}"
        state: directory

    - name: copy installer file
      unarchive:
        src: ./kubernetes.tar.gz
        dest: "{{tmp_dir}}"

    # - name: run kube-up
    #   command: "{{tmp_dir}}/kubernetes/cluster/kube-up.sh"
    #   args:
    #     chdir: "{{tmp_dir}}/kubernetes"
    #   environment:
    #     KUBERNETES_PROVIDER:
